window.__require=function t(e,o,r){function i(c,s){if(!o[c]){if(!e[c]){var l=c.split("/");if(l=l[l.length-1],!e[l]){var a="function"==typeof __require&&__require;if(!s&&a)return a(l,!0);if(n)return n(l,!0);throw new Error("Cannot find module '"+c+"'")}c=l}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return i(e[c][1][t]||t)},p,p.exports,t,e,o,r)}return o[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<r.length;c++)i(r[c]);return i}({GameManager:[function(t,e,o){"use strict";cc._RF.push(e,"76be4wg6K9Ar59WqcxFY8oQ","GameManager");var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,c=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.grid=null,e.currentIndex=0,e}return i(e,t),e.prototype.onLoad=function(){this.LoadJSONFile(),this.grid.on("Finished",this.levelFinished.bind(this))},e.prototype.start=function(){this.levelsData=this.jsonData,null==this.levelsData&&(this.levelsData={levels:[{level:1,startPosition:9,endPosition:7,blockPairs:["1-2","4-5","5-8","5-6","4-8","8-9"]}]}),this.currentLevelData=this.levelsData.levels[this.currentIndex],this.UpdateGrid()},e.prototype.UpdateGrid=function(){var t=this.currentLevelData.level,e=this.currentLevelData.startPosition,o=this.currentLevelData.endPosition,r=this.currentLevelData.blockPairs;this.grid.getComponent("grid").Initalize(t,e,o,r)},e.prototype.LoadJSONFile=function(){cc.loader.loadRes("json/config",Object,function(t,e){t?cc.error(t.message||t):this.jsonData=e.json}.bind(this))},e.prototype.levelFinished=function(){var t=this;this.currentIndex++,this.currentLevelData=this.levelsData.levels[this.currentIndex],this.scheduleOnce(function(){t.UpdateGrid()},1)},n([l(cc.Node)],e.prototype,"grid",void 0),n([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],grid:[function(t,e,o){"use strict";cc._RF.push(e,"82d73ivZFZMYYO9CScQsaFf","grid");var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,c=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<o;e++)for(var n=arguments[e],c=0,s=n.length;c<s;c++,i++)r[i]=n[c];return r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,a=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockers=null,e.player=null,e.updateText=null,e.level=0,e.startPosition=0,e.endPosition=1,e.currentPosition=0,e.blockPairs=[],e.rules=[],e.visitedNodesArr=[],e.delayBool=!1,e}return i(e,t),e.prototype.start=function(){},e.prototype.Initalize=function(t,e,o,r){this.node.getChildByName(this.endPosition+"").color=new cc.Color(255,255,255),this.updateText.getComponent(cc.Label).string=" ",this.level=t,this.startPosition=e,this.endPosition=o,this.blockPairs=r,this.blockPairs=this.UpdateBlockPairs(this.blockPairs),this.midNumber=5,this.node.getChildByName(this.endPosition+"").color=new cc.Color(0,0,255),this.player.position=this.node.getChildByName(this.startPosition+"").position,this.currentPosition=this.startPosition,this.visitedNodesArr=[],this.visitedNodesArr.push(this.startPosition+""),this.ActivateBlockPairs(this.blockPairs)},e.prototype.UpdateBlockPairs=function(t){var e,o,r,i=["1-3","1-7","1-9","3-9","7-9"],n=t,s=[];return n.forEach(function(t,i){e=n[i][0],o=n[i][2],r=e,e=o,o=r,s.push(e+"-"+o)}),i.forEach(function(t,n){e=i[n][0],o=i[n][2],r=e,e=o,o=r,s.push(e+"-"+o)}),c(n,s,i)},e.prototype.ActivateBlockPairs=function(t){var e=this;this.DeactivateAllBlockers(),t.forEach(function(t){e.blockers.getChildByName(t)&&(e.blockers.getChildByName(t).active=!0)}),this.blockers.children.forEach(function(t){t.active})},e.prototype.DeactivateAllBlockers=function(){this.blockers.children.forEach(function(t){t.active=!1})},e.prototype.MoveToGrid=function(t,e){var o=this;if(!this.delayBool&&this.currentPosition!=e){if(this.visitedNodesArr.includes(e))return this.updateText.color=new cc.Color(255,0,0),void(this.updateText.getComponent(cc.Label).string="Already visited node");if(this.CheckForBlockers(this.currentPosition,parseInt(e)))return this.updateText.color=new cc.Color(255,0,0),void(this.updateText.getComponent(cc.Label).string="Cannot move to this position");if(this.CheckDiagonalBlockers(this.currentPosition,parseInt(e)))return this.updateText.color=new cc.Color(255,0,0),void(this.updateText.getComponent(cc.Label).string="Cannot move to this position");if(parseInt(e)==this.endPosition){if(this.visitedNodesArr.length!=this.node.children.length-1)return void console.log("incomplete");this.node.emit("Finished")}this.currentPosition=e,this.visitedNodesArr.push(e);var r=cc.moveTo(.5,this.node.getChildByName(e).x,this.node.getChildByName(e).y);this.player.runAction(r),this.updateText.color=new cc.Color(0,255,0),this.updateText.getComponent(cc.Label).string="Current position Updated to "+e,this.delayBool=!0,this.scheduleOnce(function(){o.delayBool=!1},.5)}},e.prototype.CheckForBlockers=function(t,e){return this.blockPairs.includes(t+"-"+e)},e.prototype.CheckDiagonalBlockers=function(t,e){var o,r,i=this,n=[],c=t,s=!1;console.log(typeof c),"string"==typeof c&&(console.log("here inside"),c=parseInt(c)),console.log(typeof c),1!=c&&3!=c&&2!=c||(r=-3),7!=c&&9!=c&&5!=c&&8!=c||(r=3),(1==c||7==c||2==c&&e>5||8==c&&e>5)&&(o=1),(3==c||9==c||2==c&&e<5||8==c&&e<5)&&(o=-1);var l=c+o,a=c-r;return n.push(l+"-"+a),n.push(a+"-"+l),console.log(n),console.log(typeof e,typeof a),n.forEach(function(t){e!=a&&i.blockPairs.includes(t)&&(s=!0)}),s},n([a(cc.Node)],e.prototype,"blockers",void 0),n([a(cc.Node)],e.prototype,"player",void 0),n([a(cc.Node)],e.prototype,"updateText",void 0),n([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],loadJsonFile:[function(t,e,o){"use strict";cc._RF.push(e,"21cdaxY2lZFcKoK1/A31gvW","loadJsonFile");var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,c=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return i(e,t),e.prototype.start=function(){},n([l(cc.Label)],e.prototype,"label",void 0),n([l],e.prototype,"text",void 0),n([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}]},{},["GameManager","grid","loadJsonFile"]);